{% extends "base.html" %}
{% import 'components/wallpaper.html' as wallpaper %}

{% block title %}
Predictions
{% endblock %}

{% block main %}

<div class="content-container">
    <div class="row justify-content-center">
        <div class="card col-lg-6" style="text-align: start;" id="form-card">
            <h3 class="card-header">Add some data to make a new passenger</h3>
            <div class="card-body">
                <form id="form">
                    <p class="card-text">Some quick example text to build on the card title and make up the bulk of the
                        card's content.</p>

                    <div class="mb-3">
                        <label for="name" class="form-label">Passenger name</label>
                        <input type="text" class=" form-control" id="name" name="name" placeholder="Jon/Jane Doe"
                            required>
                    </div>
                    <div class="mb-3">
                        <label for="age" class="form-label">Age</label>
                        <input type="number" min="0" max="99" class=" form-control" id="age" name="age" placeholder="25"
                            required>
                    </div>
                    <div class="mb-3">
                        <label for="class" class="form-label">Ticket class</label>
                        <select class="form-select" id="class" name="class" aria-label="Default select example"
                            required>
                            <option value="1" selected>1st class</option>
                            <option value="2">2nd class</option>
                            <option value="3">3rd class</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="sex" class="form-label">Sex</label>
                        <select class="form-select" id="sex" name="sex" aria-label="Default select example" required>
                            <option value="0" selected>Female</option>
                            <option value="1">Male</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="sibsp" class="form-label">Number of siblings and/or wife/husband</label>
                        <input type="number" min="0" max="9" class=" form-control" id="sibsp" name="sibsp"
                            placeholder="2" required>
                    </div>
                    <div class="mb-3">
                        <label for="parch" class="form-label">Number of parents and/or children onboard</label>
                        <input type="number" min="0" max="9" class=" form-control" id="parch" name="parch"
                            placeholder="2" required>
                    </div>
                    <div class="mb-3">
                        <label for="fare" class="form-label">Fare</label>
                        <input type="number" min="0" max="100" class=" form-control" id="fare" name="fare"
                            placeholder="72.1500" required>
                    </div>
                    <div class="mb-3">
                        <label for="embarked" class="form-label">Embarked</label>
                        <select class="form-select" id="embarked" name="embarked" aria-label="Default select example"
                            required>
                            <option value="0" selected>S</option>
                            <option value="1">C</option>
                            <option value="2">Q</option>
                        </select>
                    </div>

                    <input type="submit" class="btn btn-primary" value="Submit data">
                </form>
            </div>
        </div>

        <div class="card col-lg-6" style="text-align: start;" id="result-card">
            <h3 class="card-header">Here is your result</h3>
            <div class="card-body">
                Here you can find the result data

                <button class="btn" onclick="go_back_to_form()">
                    Get another result
                </button>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block js_scripts %}
<script>
    let formSend = false
    let form = document.getElementById('form')
    let form_card = document.getElementById('form-card')
    let result_card = document.getElementById('result-card')

    if (formSend) {
        form_card.style.display = "none"
        result_card.style.display = "block"
    } else {
        form_card.style.display = "block"
        result_card.style.display = "none"
    }

    function go_back_to_form() {
        formSend = false

        form_card.style.display = "block"
        result_card.style.display = "none"
        form.reset()
    }



    form.addEventListener('submit', e => {
        e.preventDefault()
        //self.fields.forEach(field => {
        //const input = document.querySelector(`#${field}`)
        //self.validateFields(input)
        console.log("Form send")
        formSend = true
        form_card.style.display = "none"
        result_card.style.display = "block"
        //})
    })


    function validate_inputs() {
        // Here I will add the input validations
    }

    function sendData(passenger) {
        const tmp_passenger = {
            "name": document.getElementById('name').value,
            "age": document.getElementById('age').value,
            "psgClass": document.getElementById('class').value,
            "sex": document.getElementById('sex').value,
            "sibsp": document.getElementById('sibsp').value,
            "parch": document.getElementById('parch').value,
            "fare": document.getElementById('fare').value,
            "embarked": document.getElementById('embarked').value,
        }

        console.log(tmp_passenger)
        console.log("Sending data to the ML model")
    }
</script>
{% endblock %}